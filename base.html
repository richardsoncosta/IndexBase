<!DOCTYPE html>
<html>

<head>
    <title>Base de conhecimentos</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="estilo.css">
    <style>
        .postagem {
            position: relative;
            width: 100%;
            margin-bottom: 20px;
        }

        #toggleButton {
            width: 100%;
            padding: 10px;
            background-color: #9ACD32;
            color: white;
            border: none;
            cursor: pointer;
            text-align: center;
            font-size: 16px;
            margin-bottom: 10px;
        }

        #toggleButton:hover {
            background-color: #0056b3;
        }

        .postagem.fretedeloja {
            width: 100%;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            box-sizing: border-box;
            margin-top: 10px;
        }

        .codigo {
            display: none; /* Inicialmente oculto */
            overflow: hidden;
            transition: height 0.5s;
        }

        .codigo.visible {
            display: block; /* Exibir quando o botão "Mostrar solução" for clicado */
        }

        .hidden {
            display: none; /* Classe para ocultar elementos */
        }
    </style>
    <script>
        function checkAuth() {
            const user = localStorage.getItem('user');
            const timestamp = localStorage.getItem('timestamp');

            if (user && timestamp && (Date.now() - timestamp < 4 * 60 * 60 * 1000)) {
                return true;
            }

            while (true) {
                const username = prompt("Digite o nome de usuário:");
                if (username === null) {
                    alert("Autenticação cancelada.");
                    return false;
                }

                const password = prompt("Digite a senha:");
                if (password === null) {
                    alert("Autenticação cancelada.");
                    return false;
                }

                if (username === "SUPERVISOR" && password === "123456") {
                    localStorage.setItem('user', username);
                    localStorage.setItem('timestamp', Date.now());
                    return true;
                } else {
                    alert("Usuário ou senha incorretos. Tente novamente.");
                }
            }
        }

        if (!checkAuth()) {
            window.location.href = "about:blank";
        }

        // Função para o botão "SUPORTE FRENTE DE LOJA"
        function toggleCode(button) {
            const contentElement = document.getElementById('fretedeloja-content');
            const codeElement = document.querySelector('.codigo');

            if (contentElement.classList.contains('hidden')) {
                contentElement.classList.remove('hidden');
                button.textContent = "OCULTAR SUPORTE FRENTE DE LOJA";
            } else {
                contentElement.classList.add('hidden');
                button.textContent = "SUPORTE FRENTE DE LOJA";
                // Garantir que o código também seja ocultado
                codeElement.style.display = "none";
                document.getElementById('showSolutionButton').textContent = "Mostrar solução";
            }
        }

        // Função para o botão "Mostrar solução"
        function toggleSolution() {
            const codeElement = document.querySelector('.codigo');
            const button = document.getElementById('showSolutionButton');

            if (codeElement.style.display === "none" || codeElement.style.display === "") {
                codeElement.style.display = "block";
                button.textContent = "Ocultar solução";
            } else {
                codeElement.style.display = "none";
                button.textContent = "Mostrar solução";
            }
        }

        function buscarConteudo() {
            const termo = document.getElementById("inputBusca").value.toLowerCase();
            const postagens = document.querySelectorAll(".postagem");

            postagens.forEach(postagem => {
                const titulo = postagem.querySelector("h4").textContent.toLowerCase();
                const descricao = postagem.querySelector(".descricao-conhecimento").textContent.toLowerCase();
                const codigo = postagem.querySelector(".codigo").textContent.toLowerCase();

                if (titulo.includes(termo) || descricao.includes(termo) || codigo.includes(termo)) {
                    postagem.style.display = "";
                } else {
                    postagem.style.display = "none";
                }
            });
        }
    </script>
</head>

<body>
    <div id="area-cabecalho">
        <div id="area-logo">
            <h1>Suporte</h1>
        </div>
        <div id="area-menu">
            <a href="index.html">Home</a>
            <a class="selecionado" href="base.html">Base de Conhecimentos</a>
            <a href="tutoriais.html">Tutoriais</a>
            <a href="sql.html">SQLs</a>
            <a href="downloads.html">Downloads</a>
        </div>
    </div>

    <div id="area-principal">
        <div id="area-sql">
            <div>
                <h2>Base de conhecimentos</h2>
                <br>
                <span class="descricao">Encontre erro mapeados e suas soluçõs rapidas</span>
                <br>
                <br>
                <br>
                <p>Nesta seção você vai encontrar um acervo de erros documentados e suas soluções de uso rotineiro do suporte para as mais diversas situações</p>
                <br>
                <div>
                    <input type="text" id="inputBusca" placeholder="Buscar conteúdo..." oninput="buscarConteudo()">
                    <p class="buscar-conteudo">Use a barra acima para buscar conteúdo.</p>
                </div>
                <br>
                <br>
                <br>

                <!-- Início das postagens -->
                <div class="postagem">
                    <button id="toggleButton" onclick="toggleCode(this)">SUPORTE FRENTE DE LOJA</button>
                    <div class="postagem fretedeloja" id="fretedeloja">
                        <div id="fretedeloja-content" class="hidden">
                            <h4>1 - Contingencia: Schema XML: The 'http://www.portalfiscal.inf.br/nfe.cAut element is invalid - The value " is invalid according to its datatype 'String - The Pattern constraint</h4>
                            <br>
                            <span class="descricao-conhecimento">Erro no XML, existe algum caractere que não é aceito pela sefaz no campo de autorização manual, que o frentista informa para finalizar uma venda em cartão manual</span>
                            <br>
                            <br>
                            <button id="showSolutionButton" onclick="toggleSolution()">Mostrar solução</button>
                            <pre class="codigo">
                                <br>
Para correção: 
                                
1 - No banco do PAF>tabela VENDA_FECHAMENTO_CRT>coluna CARTAO_AUTORIZAÇAO> Alterar o valor nesse campo por qualquer numero natural>comitar e (Caso nao seja necessário para o cliente essa funçao, de digitar o numero de autorização para baixar a venda, podemos desativar a função e evitar futuros casos 

2 - Para desativar a função caso o cliente não use (Perguntar se usa) > Acessar > "configurações PDV"> aba TEF> desmarcar flag canto inferior esquerdo > solicitação digitação manual para cartão
                                <br>
                            </pre>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>
    </div>
</body>

</html>
